<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slices of Pi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for easy theming and a modern look */
        :root {
            --background-color: #111827; /* Dark blue-gray */
            --surface-color: #1F2937;    /* Lighter gray for cards */
            --primary-color: #818CF8;     /* Soft purple */
            --secondary-color: #34D399;   /* Vibrant green */
            --text-color: #E5E7EB;       /* Off-white */
            --text-muted-color: #9CA3AF; /* Gray for subtitles */
            --font-main: 'Inter', sans-serif;
        }

        /* Basic Reset and Body Styling */
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: var(--font-main);
            margin: 0;
            padding: 2rem;
            text-align: center;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
            z-index: 1;
        }

        /* Animated Background Canvas */
        #pi-stream-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        header, main, footer {
            position: relative;
            z-index: 2;
        }

        /* Header Styling */
        header {
            margin-bottom: 4rem;
        }

        h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            color: var(--text-color);
            font-weight: 700;
            letter-spacing: -1px;
        }

        h1 .pi-symbol {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        h1 .domain-name {
            font-size: clamp(0.8rem, 2vw, 1rem);
            color: var(--text-muted-color);
            font-weight: 400;
            display: block;
            margin-top: 0.5rem;
            word-break: break-all;
        }

        /* Project Grid */
        #pi-tapestry {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .pi-quartet {
            background-color: var(--surface-color);
            padding: 1.5rem 1rem;
            border-radius: 12px;
            font-size: 1.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, border-color 0.2s ease-out;
            border: 1px solid #374151;
            opacity: 0;
            transform: translateY(20px);
            animation: reveal 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        }

        .pi-quartet:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.3), 0 0 15px -3px var(--primary-color);
            border-color: var(--primary-color);
        }
        
        @keyframes reveal {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Footer credits */
        footer {
            margin-top: 5rem;
            font-size: 0.9rem;
            color: var(--text-muted-color);
        }
        
        footer a {
            color: var(--secondary-color);
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
        
        /* --- Modal Styles --- */
        #modal-backdrop {
            position: fixed;
            z-index: 100;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(8px);
            display: none; 
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #modal-backdrop.visible {
            display: flex;
            opacity: 1;
        }

        #project-modal {
            background-color: var(--surface-color);
            padding: 2.5rem;
            border-radius: 16px;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.95) translateY(10px);
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
            border: 1px solid #374151;
            text-align: left;
        }
        
        #modal-backdrop.visible #project-modal {
            transform: scale(1) translateY(0);
        }

        #modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--text-muted-color);
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease;
            z-index: 10;
        }
        
        #modal-close-btn:hover {
            color: var(--text-color);
            transform: rotate(90deg);
        }

        /* Media Viewer (Carousel) Styles */
        #modal-media-viewer {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 10;
            background-color: #111827;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        #modal-media-viewer img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        #modal-media-viewer img.active {
            opacity: 1;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0,0,0,0.4);
            color: white;
            border: none;
            font-size: 1.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            z-index: 5;
            transition: background-color 0.2s ease;
        }
        .carousel-btn:hover {
            background-color: rgba(0,0,0,0.7);
        }
        #carousel-prev { left: 1rem; border-radius: 8px 0 0 8px; }
        #carousel-next { right: 1rem; border-radius: 0 8px 8px 0; }
        
        /* Modal Content Styles */
        #modal-title {
            margin: 0 0 1rem 0;
            color: var(--primary-color);
            font-size: 2rem;
        }

        #modal-description {
            line-height: 1.7;
            margin-bottom: 2rem;
        }
        
        /* Architect's Notes Styles */
        #modal-architect-notes {
            margin: 2.5rem 0;
            padding-top: 2rem;
            border-top: 1px solid #374151;
        }
        
        #modal-architect-notes h4 {
            color: var(--secondary-color);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        #modal-architect-notes p {
            margin: 0 0 1.5rem 0;
            color: var(--text-muted-color);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        #modal-tech-stack {
            margin-bottom: 2rem;
        }

        #modal-tech-stack span {
            display: inline-block;
            background-color: #374151;
            color: var(--secondary-color);
            padding: 0.4rem 0.9rem;
            border-radius: 999px;
            font-size: 0.85rem;
            font-weight: 500;
            margin: 0.25rem;
        }
        
        #modal-links a {
            background-color: var(--primary-color);
            color: #111827;
            font-weight: 600;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            margin-right: 1rem;
            transition: background-color 0.2s ease;
        }
        
        #modal-links a:hover {
            background-color: #A7B1FB;
        }

    </style>
</head>
<body>
    
    <canvas id="pi-stream-background"></canvas>

    <header>
        <h1>Slices of <span class="pi-symbol">œÄ</span></h1>
        <h2>3.</h2>
    </header>

    <main>
        <div id="pi-tapestry"></div>
    </main>
    
    <footer>
        <p>A collaborative project by <a href="#" target="_blank">Ak Yair Lin Cortek</a> &amp; <a href="https://gemini.google.com/" target="_blank">Gemini</a>. Crafted with ‚ù§Ô∏è‚Äçüî•.</p>
    </footer>

    <!-- Modal structure with ENHANCED accessibility attributes -->
    <div id="modal-backdrop">
        <div id="project-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
            <button id="modal-close-btn" aria-label="Close project details">&times;</button>
            <div id="modal-media-viewer"></div>
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
            <div id="modal-architect-notes"></div>
            <div id="modal-tech-stack"></div>
            <div id="modal-links"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            /*
             * ARCHITECT'S NOTE: SEPARATION OF CONCERNS
             * For future scalability, consider moving this large `projectData` object
             * into its own `projects.js` file and including it before this script.
             * This will keep our data cleanly separated from our application logic.
            */

            // --- 1. THE DATA LEDGER ---
            const projectData = {
                "1415": {
                    title: "Project Alpha: Small Project Repository",
                    description: "This is a project repository for small projects that showcase various technologies and methodologies. We aim to demonstrate best practices in software development, including clean code, modular architecture, and efficient data handling.",
                    techStack: ["Linux", "Docker", "Web Programming", "Systems Architecture"],
                    githubUrl: "#", 
                    liveUrl: null,
                    media: [
                        'https://placehold.co/800x500/1F2937/818CF8?text=Architecture+Diagram',
                        'https://placehold.co/800x500/1F2937/34D399?text=Database+Schema'
                    ],
                    notes: {
                        challenge: "Designing a database schema that was both normalized for data integrity and performant for complex, real-time queries.",
                        solution: "Implemented a hybrid approach using standard relational tables for core data and a JSONB column in PostgreSQL for flexible, unstructured metadata.",
                        learning: "This project reinforced the critical importance of domain-driven design and deeply understanding the trade-offs between normalization and query flexibility."
                    }
                },
                "9265": {
                    title: "Project Beta: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "3589": {
                    title: "Project Charlie: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "7932": {
                    title: "Project Delta: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "3846": {
                    title: "Project Echo: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "2643": {
                    title: "Project Foxtrot: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "3832": {
                    title: "Project Golf: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "7950": {
                    title: "Project Hotel: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "2884": {
                    title: "Project India: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "1971": {
                    title: "Project Juliett: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "6939": {
                    title: "Project Kilo: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "9375": {
                    title: "Project Lima: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "1058": {
                    title: "Project Mike: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "2097": {
                    title: "Project November: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                },
                "4944": {
                    title: "Project Oscar: The Visualizer",
                    description: "Building upon the Genesis Engine, this project is an interactive web application that visualizes complex data sets in real-time using only native browser technologies.",
                    techStack: ["Vanilla JS", "HTML5 Canvas", "WebSockets", "UI/UX"],
                    githubUrl: "#", 
                    liveUrl: "#",
                    media: [
                        'https://placehold.co/800x500/1F2937/E5E7EB?text=Live+Dashboard+UI',
                        'https://placehold.co/800x500/111827/9CA3AF?text=Canvas+Interaction',
                        'https://placehold.co/800x500/1F2937/FFFFFF?text=Mobile+Responsive+View'
                    ],
                    notes: {
                        challenge: "Rendering thousands of data points on an HTML5 canvas without compromising browser performance or responsiveness.",
                        solution: "Utilized canvas layering and offscreen rendering, only redrawing elements that changed within the viewport. Throttled WebSocket events to prevent data overload.",
                        learning: "A profound appreciation for the power of pure JavaScript for performance-critical tasks and the nuances of the browser rendering pipeline."
                    }
                }
            };
            // Define the order explicitly as written above
            const projectOrder = [
                "1415", "9265", "3589", "7932", "3846", "2643", "3832", "7950", "2884", "1971", "6939", "9375", "1058", "2097", "4944"
            ];

            // --- 2. DOM ELEMENT REFERENCES ---
            const tapestryContainer = document.getElementById('pi-tapestry');
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const canvas = document.getElementById('pi-stream-background');
            const ctx = canvas.getContext('2d');
            
            // --- 3. RENDER TAPESTRY (with animation delay) ---
            const renderTapestry = () => {
                tapestryContainer.innerHTML = '';
                projectOrder.forEach((projectId, index) => {
                    const quartetElement = document.createElement('div');
                    quartetElement.classList.add('pi-quartet');
                    quartetElement.textContent = projectId;
                    quartetElement.dataset.projectId = projectId;
                    quartetElement.style.animationDelay = `${index * 60}ms`;
                    tapestryContainer.appendChild(quartetElement);
                });
            };

            // --- 4. MODAL LOGIC (with Accessibility) ---
            let currentImageIndex = 0;
            let lastFocusedElement; // For accessibility
            const openModal = (projectId) => {
                const project = projectData[projectId];
                if (!project) return;
                
                lastFocusedElement = document.activeElement; // Store what was focused before opening modal

                // --- Populate Content (As before) ---
                document.getElementById('modal-title').textContent = project.title;
                document.getElementById('modal-description').textContent = project.description;

                // --- Media Viewer ---
                const mediaViewer = document.getElementById('modal-media-viewer');
                mediaViewer.innerHTML = '';
                if (project.media && project.media.length > 0) {
                    mediaViewer.style.display = 'block';
                    currentImageIndex = 0;
                    project.media.forEach((src, index) => {
                        const img = document.createElement('img');
                        img.src = src;
                        img.onerror = () => img.src = 'https://placehold.co/800x500/1F2937/E5E7EB?text=Image+Not+Found';
                        if(index === 0) img.classList.add('active');
                        mediaViewer.appendChild(img);
                    });
                    if (project.media.length > 1) {
                        const prevBtn = document.createElement('button');
                        prevBtn.id = 'carousel-prev';
                        prevBtn.className = 'carousel-btn';
                        prevBtn.innerHTML = '&#10094;';
                        const nextBtn = document.createElement('button');
                        nextBtn.id = 'carousel-next';
                        nextBtn.className = 'carousel-btn';
                        nextBtn.innerHTML = '&#10095;';
                        mediaViewer.appendChild(prevBtn);
                        mediaViewer.appendChild(nextBtn);
                        const images = mediaViewer.querySelectorAll('img');
                        const updateCarousel = () => {
                            images.forEach((img, i) => img.classList.toggle('active', i === currentImageIndex));
                        };
                        prevBtn.onclick = () => {
                            currentImageIndex = (currentImageIndex > 0) ? currentImageIndex - 1 : images.length - 1;
                            updateCarousel();
                        };
                        nextBtn.onclick = () => {
                            currentImageIndex = (currentImageIndex < images.length - 1) ? currentImageIndex + 1 : 0;
                            updateCarousel();
                        };
                    }
                } else {
                    mediaViewer.style.display = 'none';
                }

                // --- Architect's Notes ---
                const notesContainer = document.getElementById('modal-architect-notes');
                notesContainer.innerHTML = '';
                if (project.notes) {
                    notesContainer.innerHTML = `
                        <h4>Challenge:</h4><p>${project.notes.challenge}</p>
                        <h4>Solution:</h4><p>${project.notes.solution}</p>
                        <h4>Learning:</h4><p>${project.notes.learning}</p>
                    `;
                }
                
                // --- Tech Stack & Links ---
                const techStackContainer = document.getElementById('modal-tech-stack');
                techStackContainer.innerHTML = '<h3>Tech Stack:</h3>';
                if(project.techStack) project.techStack.forEach(tech => {
                    const techTag = document.createElement('span');
                    techTag.textContent = tech;
                    techStackContainer.appendChild(techTag);
                });
                const linksContainer = document.getElementById('modal-links');
                linksContainer.innerHTML = '';
                if (project.liveUrl) linksContainer.innerHTML += `<a href="${project.liveUrl}" target="_blank" rel="noopener noreferrer">Live Demo</a>`;
                if (project.githubUrl) linksContainer.innerHTML += `<a href="${project.githubUrl}" 'target="_blank" rel="noopener noreferrer">View on GitHub</a>`;
                
                modalBackdrop.classList.add('visible');
                document.body.style.overflow = 'hidden';
                modalCloseBtn.focus(); // Move focus to the close button for accessibility
            };
            const closeModal = () => {
                modalBackdrop.classList.remove('visible');
                document.body.style.overflow = '';
                if (lastFocusedElement) lastFocusedElement.focus(); // Return focus to the element that opened the modal
            };

            // --- 5. PI STREAM BACKGROUND ANIMATION (with comments) ---
            let animationFrameId;
            const setupPiStream = () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                const pi = "31415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679";
                const fontSize = 14;
                const columns = canvas.width / fontSize;
                // Create an array of 'drops', one for each column.
                // Each drop tracks the Y-position of the falling digit in its column.
                const drops = Array(Math.floor(columns)).fill(1);
                
                const draw = () => {
                    // The semi-transparent fill creates the iconic fading trail effect.
                    ctx.fillStyle = "rgba(17, 24, 39, 0.1)"; 
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Set the color and font for the falling digits.
                    ctx.fillStyle = "rgba(129, 140, 248, 0.2)";
                    ctx.font = `${fontSize}px ${getComputedStyle(document.body).fontFamily}`;

                    for (let i = 0; i < drops.length; i++) {
                        const text = pi[Math.floor(Math.random() * pi.length)];
                        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                        // Reset the drop to the top if it's off-screen.
                        // The Math.random() check adds variation, so they don't all reset at once.
                        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                            drops[i] = 0;
                        }
                        drops[i]++;
                    }
                };
                
                const animateStream = () => {
                    draw();
                    animationFrameId = requestAnimationFrame(animateStream);
                }
                animateStream();
            };
            
            const handleResize = () => {
                cancelAnimationFrame(animationFrameId);
                setupPiStream();
            }
            window.addEventListener('resize', handleResize);

            // --- 6. EVENT LISTENERS ---
            tapestryContainer.addEventListener('click', (event) => {
                const quartet = event.target.closest('.pi-quartet');
                if (quartet) openModal(quartet.dataset.projectId);
            });
            modalCloseBtn.addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', (event) => {
                if (event.target === modalBackdrop) closeModal();
            });
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && modalBackdrop.classList.contains('visible')) closeModal();
            });

            // --- INITIALIZATION ---
            renderTapestry();
            setupPiStream();
        });
    </script>

</body>
</html>

